<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Configuration &mdash; OEI Documentation v1.0 documentation</title><link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/graphviz.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/copybutton.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/tabs.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/custom.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/contentui.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  <script id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
        <script src="../../_static/jquery.js"></script>
        <script src="../../_static/underscore.js"></script>
        <script src="../../_static/doctools.js"></script>
        <script src="../../_static/clipboard.min.js"></script>
        <script src="../../_static/copybutton.js"></script>
        <script src="../../_static/contentui.js"></script>
    <script src="../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="../../index.html" class="icon icon-home"> OEI Documentation
          </a>
              <div class="version">
                3.0
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
  
  <div class="rst-versions" data-toggle="rst-versions" role="note" aria-label="versions">
    <span class="rst-current-version" data-toggle="rst-current-version">
      <span class="fa fa-book"> OEI</span>
      v: 3.0
      <span class="fa fa-caret-down"></span>
    </span>
    <div class="rst-other-versions">
      <dl>
        <dt>Document Versions</dt>
        
          <dd><a href="/3.0/">3.0</a></dd>
        
          <dd><a href="/2.6/">2.6</a></dd>
        
      </dl>
    </div>
  </div>
  
              <p><span class="caption-text">Introduction:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../pages/introduction.html">Introduction to OEI</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../pages/introduction.html#terminology">Terminology</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../pages/introduction.html#general-terminology">General Terminology</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../pages/introduction.html#security-related-terminology">Security-Related Terminology</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../pages/overview.html">Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../pages/architecture.html">Architecture</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../pages/running.html">Run Open Edge Insights</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../pages/running.html#about-open-edge-insights">About Open Edge Insights</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../pages/running.html#minimum-system-requirements">Minimum System Requirements</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../pages/running.html#install-open-edge-insights-from-github">Install Open Edge Insights from GitHub</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../pages/running.html#video-pipeline-analytics">Video pipeline Analytics</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../pages/running.html#time-series-analytics">Time-series Analytics</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../pages/running.html#oei-multi-node-cluster-deployment">OEI multi-node cluster deployment</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../pages/running.html#oei-tools">OEI tools</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../pages/running.html#oei-uninstaller">OEI Uninstaller</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../pages/running.html#debugging-options">Debugging options</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../pages/running.html#web-deployment-tool">Web Deployment Tool</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../pages/running.html#troubleshooting-guide">Troubleshooting guide</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../pages/release.html">Release Notes</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../pages/release.html#oei-v3-0">OEI v3.0</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../pages/release.html#new-features">New Features</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../pages/release.html#dropped-features">Dropped Features</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../pages/release.html#known-issues">Known Issues</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../pages/release.html#eii-v2-6-2">EII v2.6.2</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../pages/release.html#fixes">Fixes</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../pages/release.html#eii-v2-6-1">EII v2.6.1</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../pages/release.html#bug-fixes">Bug fixes</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../pages/release.html#eii-v2-6">EII v2.6</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../pages/release.html#features">Features</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../pages/release.html#id1">Known Issues</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../pages/release.html#eii-v2-5-3">EII v2.5.3</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../pages/release.html#id2">Fixes</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../pages/release.html#eii-v2-5-2">EII v2.5.2</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../pages/release.html#id3">Bug fixes</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../pages/release.html#eii-v2-5-1">EII v2.5.1</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../pages/release.html#bug-fix">Bug fix</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../pages/release.html#eii-v2-5">EII v2.5</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../pages/release.html#id4">Features</a></li>
</ul>
</li>
</ul>
</li>
</ul>
<p><span class="caption-text">Core Libraries:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../pages/msgbus.html">Message Bus</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../pages/msgbus.html#id1">Message Bus</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../pages/msgbus.html#dependency-installation">Dependency Installation</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../pages/msgbus.html#compilation">Compilation</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../pages/msgbus.html#generating-documentation">Generating Documentation</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../pages/msgbus.html#potential-compilation-issues">Potential Compilation Issues</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../pages/msgbus.html#packaging">Packaging</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../pages/msgbus.html#a-note-on-alpine-apk-packaging">A Note on Alpine APK Packaging</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../pages/msgbus.html#installation">Installation</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../pages/msgbus.html#install-python-binding">Install Python Binding</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../pages/msgbus.html#install-golang-binding">Install Golang Binding</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../pages/msgbus.html#running-unit-tests">Running Unit Tests</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../pages/msgbus.html#configuration">Configuration</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../pages/msgbus.html#zeromq-ipc-configuration">ZeroMQ IPC Configuration</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../pages/msgbus.html#zeromq-tcp-configuration">ZeroMQ TCP Configuration</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../pages/msgbus.html#additional-zeromq-configuration-properties">Additional ZeroMQ Configuration Properties</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../pages/msgbus.html#example-usage">Example Usage</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../pages/msgbus.html#c-examples">C Examples</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../pages/msgbus.html#python-examples">Python Examples</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../pages/msgbus.html#go-examples">Go Examples</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../pages/msgbus.html#running-go-examples-without-installing">Running Go Examples without Installing</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../pages/msgbus.html#brokered-publish-subscribe">Brokered Publish/Subscribe</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../pages/msgbus.html#security">Security</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../pages/msgbus.html#using-only-curvezmq-encryption">Using Only CurveZMQ Encryption</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../pages/msgbus.html#id2">Using ZAP Authentication</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../pages/msgbus.html#disabling-security">Disabling Security</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../pages/msgbus.html#known-issues">Known issues</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../pages/msgbus.html#generation-of-python-whl-file-optional">Generation of python .whl file (Optional)</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../pages/msgbus.html#id3">Dependency Installation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../pages/msgbus.html#id4">Compilation</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../pages/msgbus.html#id5">Generating Documentation</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../pages/msgbus.html#id6">Potential Compilation Issues</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../pages/msgbus.html#id7">Packaging</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../pages/msgbus.html#id9">A Note on Alpine APK Packaging</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../pages/msgbus.html#id10">Installation</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../pages/msgbus.html#id11">Install Python Binding</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../pages/msgbus.html#id12">Install Golang Binding</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../pages/msgbus.html#id13">Running Unit Tests</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../pages/msgbus.html#id14">Configuration</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../pages/msgbus.html#id15">ZeroMQ IPC Configuration</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../pages/msgbus.html#id16">ZeroMQ TCP Configuration</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../pages/msgbus.html#id17">Publishers</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../pages/msgbus.html#id18">Subscribers</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../pages/msgbus.html#id19">Services</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../pages/msgbus.html#id20">Requesters</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../pages/msgbus.html#id21">Using ZAP Authentication</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../pages/msgbus.html#id22">Additional ZeroMQ Configuration Properties</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../pages/msgbus.html#id23">Example Usage</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../pages/msgbus.html#id24">C Examples</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../pages/msgbus.html#id25">Publisher Many Example</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../pages/msgbus.html#id26">Python Examples</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../pages/msgbus.html#id27">Go Examples</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../pages/msgbus.html#id28">Running Go Examples without Installing</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../pages/msgbus.html#id29">Brokered Publish/Subscribe</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../pages/msgbus.html#id30">Security</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../pages/msgbus.html#id33">Using Only CurveZMQ Encryption</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../pages/msgbus.html#id34">Publish/Subscribe</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../pages/msgbus.html#id35">Request/Response</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../pages/msgbus.html#id36">Using ZAP Authentication</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../pages/msgbus.html#id37">Disabling Security</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../pages/msgbus.html#id38">Known issues</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../pages/msgbus.html#id39">Generation of python .whl file (Optional)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../pages/msgbus.html#api-documentation">API Documentation</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../pages/eiiConfig.html">OEI Configuration Management</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../pages/eiiConfig.html#configmgr">ConfigMgr</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../pages/eiiConfig.html#configmgr-installation">ConfigMgr Installation</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../pages/eiiConfig.html#using-system-grpc">Using System gRPC</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../pages/eiiConfig.html#compilation">Compilation</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../pages/eiiConfig.html#generating-documentation">Generating Documentation</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../pages/eiiConfig.html#packaging">Packaging</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../pages/eiiConfig.html#a-note-on-alpine-apk-packaging">A Note on Alpine APK Packaging</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../pages/eiiConfig.html#interfaces">Interfaces</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../pages/eiiConfig.html#publisher-interface">Publisher Interface</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../pages/eiiConfig.html#subscriber-interface">Subscriber Interface</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../pages/eiiConfig.html#server-interface"><strong>Server Interface</strong></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../pages/eiiConfig.html#client-interface"><strong>Client Interface</strong></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../pages/eiiConfig.html#overriding-of-type-and-endpoint">Overriding of Type and EndPoint:</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../pages/eiiConfig.html#broker-usecase">Broker Usecase</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../pages/eiiConfig.html#running-examples">Running Examples</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../pages/eiiConfig.html#cpp-examples">CPP Examples</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../pages/eiiConfig.html#python-examples">Python Examples</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../pages/eiiConfig.html#go-examples">Go Examples</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../pages/eiiConfig.html#running-unit-tests">Running Unit Tests</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../pages/eiiConfig.html#creation-of-grpc-zip-file-optional">Creation of grpc .zip file (Optional)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../pages/eiiConfig.html#generation-of-python-whl-file-optional">Generation of python .whl file (Optional)</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../pages/eiiConfig.html#etcd-ui-service">ETCD UI Service</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../pages/eiiConfig.html#api-documentation">API Documentation</a></li>
</ul>
</li>
</ul>
<p><span class="caption-text">Video Analytics Pipeline:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../pages/video.html">Working with Video Data</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../pages/video.html#videoingestion-module">VideoIngestion Module</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../pages/video.html#videoanalytics-module">VideoAnalytics Module</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../pages/video.html#using-video-accelerators-in-ingestion-analytics-containers">Using video accelerators in ingestion/analytics containers</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../pages/video.html#to-run-on-usb-devices"><strong>To run on USB devices</strong></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../pages/video.html#to-run-on-myriad-devices"><strong>To run on MYRIAD devices</strong></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../pages/video.html#to-run-on-hddl-devices"><strong>To run on HDDL devices</strong></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../pages/video.html#to-run-on-intel-r-processor-graphics-gpu-igpu"><strong>To run on Intel(R) Processor Graphics (GPU/iGPU)</strong></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../pages/video.html#oei-udfloader">OEI UDFLoader</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../pages/video.html#oei-sample-udfs">OEI Sample UDFs</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../pages/video.html#user-defined-function-udf">User Defined Function (UDF)</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../pages/video.html#udf-configuration">UDF Configuration</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../pages/video.html#udf-writing-guide">UDF Writing Guide</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../pages/video.html#sample-udfs">Sample UDFs</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../pages/video.html#construction-of-metadata-in-udf">Construction of Metadata in UDF</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../pages/video.html#chaining-of-udfs">Chaining of UDFs</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../pages/video.html#native-visualizer-module">Native Visualizer Module</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../pages/video.html#web-visualizer-module">Web Visualizer Module</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../pages/video.html#imagestore-module">ImageStore Module</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../pages/video.html#influxdbconnector-module">InfluxDBConnector Module</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../pages/video.html#configuration">Configuration</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<p><span class="caption-text">Time-Series Analytics Pipeline:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../pages/timeseries.html">Working with Time series Data</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../pages/timeseries.html#telegraf">Telegraf</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../pages/timeseries.html#point-data-time-series-data-analytics-introduction">Point-data (Time-series data) analytics introduction</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../pages/timeseries.html#grafana">Grafana</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../pages/timeseries.html#influxdbconnector-module">InfluxDBConnector Module</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../pages/timeseries.html#configuration">Configuration</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<p><span class="caption-text">Export Services:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../pages/azure.html">Azure Bridge</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../pages/azure.html#introduction">Introduction</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../pages/azure.html#prerequisites-and-setup">Prerequisites and Setup</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../pages/azure.html#azure-cloud-setup">Azure Cloud Setup</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../pages/azure.html#setting-up-azureml">Setting up AzureML</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../pages/azure.html#important">Important</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../pages/azure.html#development-system-setup">Development System Setup</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../pages/azure.html#build-and-push-oei-containers">Build and Push OEI Containers</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../pages/azure.html#single-node-azure-iot-edge-deployment">Single-Node Azure IoT Edge Deployment</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../pages/azure.html#step-1-provisioning">Step 1 - Provisioning</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../pages/azure.html#expected-result">Expected Result</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../pages/azure.html#step-2-configuring-eii">Step 2 - Configuring EII</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../pages/azure.html#id3">Expected Result</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../pages/azure.html#step-3-configuring-azure-iot-deployment-manifest">Step 3 - Configuring Azure IoT Deployment Manifest</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../pages/azure.html#id4">Expected Result</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../pages/azure.html#step-4-deployment">Step 4 - Deployment</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../pages/azure.html#expected-results">Expected Results</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../pages/azure.html#helpful-debugging-commands">Helpful Debugging Commands</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../pages/azure.html#final-notes">Final Notes</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../pages/azure.html#configuration">Configuration</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../pages/azure.html#id5">Azure Bridge</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../pages/azure.html#sample-eii-onnx-udf">Sample EII ONNX UDF</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../pages/azure.html#simple-subscriber">Simple Subscriber</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../pages/azure.html#eii-etcd-pre-load">EII ETCD Pre-Load</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../pages/azure.html#azure-blob-storage">Azure Blob Storage</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../pages/azure.html#azure-deployment-manifest">Azure Deployment Manifest</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../pages/azure.html#azure-iot-edge-simulator">Azure IoT Edge Simulator</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../pages/azure.html#supported-oei-services">Supported OEI Services</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../pages/azure.html#additional-resources">Additional Resources</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../pages/opcua.html">OpcuaExport Application</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../pages/opcua.html#opcuaexport">OpcuaExport</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../pages/restdata.html">RestDataExport service</a></li>
</ul>
<p><span class="caption-text">Additional Info:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../pages/tools.html">OEI Tools</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../pages/tools.html#time-series-benchmarking-tool">Time Series Benchmarking Tool</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../pages/tools.html#video-benchmarking-tool">Video Benchmarking Tool</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../pages/tools.html#discoverhistory-tool">DiscoverHistory tool</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../pages/tools.html#embpublisher">EmbPublisher</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../pages/tools.html#how-to-integrate-this-tool-with-video-timeseries-use-case">How to integrate this tool with video/timeseries use case</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../pages/tools.html#configuration-of-the-tool">Configuration of the tool</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../pages/tools.html#running-embpublisher-in-ipc-mode">Running EmbPublisher in IPC mode</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../pages/tools.html#embsubscriber">EmbSubscriber</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../pages/tools.html#gigeconfig-tool">GigEConfig tool</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../pages/tools.html#generating-pfs-pylon-feature-stream-file">Generating PFS (Pylon Feature Stream) File</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../pages/tools.html#running-gigeconfig-tool">Running GigEConfig Tool</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../pages/tools.html#httptestserver"><code class="docutils literal notranslate"><span class="pre">HttpTestServer</span></code></a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../pages/tools.html#develop-python-user-defined-functions-using-jupyter-notebook">Develop Python User Defined Functions using Jupyter Notebook</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../pages/tools.html#prerequisites-for-using-jupyter-notebooks">Prerequisites for using Jupyter Notebooks</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../pages/tools.html#run-jupyter-notebook-from-web-browsers">Run Jupyter Notebook from web browsers</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../pages/tools.html#run-jupyter-notebook-using-visual-studio-code">Run Jupyter Notebook using Visual Studio Code</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../pages/tools.html#mqtt-publisher">MQTT publisher</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../pages/tools.html#software-trigger-utility-for-videoingestion-module">Software Trigger Utility for VideoIngestion Module</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../pages/tools.html#oei-timeseriesprofiler">OEI TimeSeriesProfiler</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../pages/tools.html#prerequisites">Prerequisites</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../pages/tools.html#oei-timeseriesprofiler-modes">OEI TimeSeriesProfiler modes</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../pages/tools.html#oei-timeseriesprofiler-configurations">OEI TimeSeriesProfiler configurations</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../pages/tools.html#running-timeseriesprofiler">Running TimeSeriesProfiler</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../pages/tools.html#oei-video-profiler">OEI Video Profiler</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../pages/tools.html#oei-video-profiler-prerequisites">OEI Video Profiler prerequisites</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../pages/tools.html#oei-video-profiler-modes">OEI Video Profiler modes</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../pages/tools.html#oei-video-profiler-configurations">OEI Video Profiler configurations</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../pages/tools.html#run-video-profiler">Run Video Profiler</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../pages/tools.html#running-videoprofiler-in-helm-usecase">Running VideoProfiler in helm usecase</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../pages/tools.html#optimizing-oei-video-pipeline-by-analysing-video-profiler-results">Optimizing OEI Video pipeline by analysing Video Profiler results</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../pages/tools.html#benchmarking-with-multi-instance-config">Benchmarking with multi-instance config</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../pages/sample.html">OEI Samples</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../pages/sample.html#eii-sample-apps">EII Sample Apps</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../pages/sample.html#steps-to-run-eii-samples-apps">Steps to run EII samples apps</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../pages/security.html">Security</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../pages/security.html#provisioning">Provisioning</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../pages/security.html#generating-keys-and-certificates">Generating Keys and Certificates</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../pages/security.html#start-up-and-run-time">Start Up and Run Time</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../pages/security.html#accessing-secrets">Accessing Secrets</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../pages/security.html#certificate-revocation">Certificate Revocation</a></li>
</ul>
</li>
</ul>


        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">OEI Documentation</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
  <!-- 3.0 -->
  
  

  <li><a href="../../index.html">3.0</a> &raquo;</li>
  
  <li>Configuration</li>

      <li class="wy-breadcrumbs-aside">
              <a href="https://github.com//intel-innersource/applications.industrial.edge-insights.open-edge-insights-github-io/blob/master/source/IEdgeInsights/AzureBridge/configuration.rst" class="fa fa-github"> Edit on GitHub</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="configuration">
<h1>Configuration<a class="headerlink" href="#configuration" title="Permalink to this headline">¶</a></h1>
<p>The configuration of the Azure Bridge is a mix of the configuration for the
EII services, the Azure Bridge module, and configuration for the other
Azure IoT Edge Modules (i.e. the Simple Subscriber, and the Azure Blob Storage
modules). All of this configuration is wrapped up into your deployment manifest
for Azure IoT Hub.</p>
<p>The following sections cover the configuration of the aforementioned servies
and then the generation of your Azure Deployment manifest.</p>
<section id="azure-bridge">
<h2>Azure Bridge<a class="headerlink" href="#azure-bridge" title="Permalink to this headline">¶</a></h2>
<p>The Azure Bridge spans EII and Azure IoT Edge Runtime environments, as such
its configuration is a mix of EII configuration and Azure IoT Edge module configuration
properties. The configuration of the bridge is split between environmental
variables specified in your Azure IoT Hub deployment manifest and the module’s
digital twin. Additionally, the digital twin for the Azure Bridge module
contains the entire configuration for the EII services running in your edge
environment.</p>
<p>The configuration of the EII Message Bus is done in a method similar to that of
the other EII services, such as the Video Analytics service. To provided the
configuration for the topics which the bridge should subscribe to,
you must set the <code class="docutils literal notranslate"><span class="pre">Subscribers</span></code> list in the <a class="reference external" href="https://github.com/open-edge-insights/eii-azure-bridge/blob/master/modules/AzureBridge/config.json">modules/AzureBridge/config.json</a>
file. The list is comprised of JSON objects for every subscription you wish the
Azure Bridge to establish. Below is an example of the configuration for
subscribing to the the publications coming from the Video Analytics container.</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;Subscribers&quot;</span><span class="o">:</span> <span class="p">[</span>
        <span class="p">{</span>
            <span class="c1">// Specifies that this is the default subscriber</span>
            <span class="s2">&quot;Name&quot;</span><span class="o">:</span> <span class="s2">&quot;default&quot;</span><span class="p">,</span>

            <span class="c1">// Gives the type of connection, i.e. zmq_tcp, this could</span>
            <span class="c1">// also be zmq_ipc</span>
            <span class="s2">&quot;Type&quot;</span><span class="o">:</span> <span class="s2">&quot;zmq_tcp&quot;</span><span class="p">,</span>

            <span class="c1">// The EndPoint specifies the details of the connect, for an</span>
            <span class="c1">// IPC connection, this would be a JSON object with the</span>
            <span class="c1">// SocketDir key pointing to the directory of the IPC sockets</span>
            <span class="s2">&quot;EndPoint&quot;</span><span class="o">:</span> <span class="s2">&quot;127.0.0.1:65013&quot;</span><span class="p">,</span>

            <span class="c1">// Specification of the AppName of the service publishing the</span>
            <span class="c1">// messages. This allows the Azure Bridge to get the needed</span>
            <span class="c1">// authentication keys to subscribe</span>
            <span class="s2">&quot;PublisherAppName&quot;</span><span class="o">:</span> <span class="s2">&quot;VideoAnalytics&quot;</span><span class="p">,</span>

            <span class="c1">// Specifies the list of all of the topics which the</span>
            <span class="c1">// AzureBridge shall subscribe to</span>
            <span class="s2">&quot;Topics&quot;</span><span class="o">:</span> <span class="p">[</span>
                <span class="s2">&quot;camera1_stream_results&quot;</span>
            <span class="p">]</span>
        <span class="p">}</span>
    <span class="p">]</span>
<span class="p">}</span>
</pre></div>
</div>
<p>There are a few important implications to be aware of for both ZeroMQ TCP and IPC
subscribers over the EII Message Bus. These implications are specified below.</p>
<p><strong>ZeroMQ TCP Subscription Implications</strong></p>
<p>For ZeroMQ TCP subscribers, like the example shown above, the <code class="docutils literal notranslate"><span class="pre">EndPoint</span></code> in
the subscriber’s configuration object has to be overridden through an
environmental variable. The reason for this, is that the Azure Bridge
service runs attached to a bridged Docker network created by the Azure IoT
Edge Runtime, whereas the other EII services run on the different bridged network.
In order to subscribe, the Azure Bridge must use the host’s IP address to
connect.</p>
<p>If the Azure Bridge is only subscribing to a single service, then the
<code class="docutils literal notranslate"><span class="pre">EndPoint</span></code> can be overridden by setting the <code class="docutils literal notranslate"><span class="pre">SUBSCRIBER_ENDPOINT</span></code> environmental
variable. The environmental variable changes if there are multiple subscribers.
For instance, if the configuration example had another object in the Subscribers
list which had the <code class="docutils literal notranslate"><span class="pre">Name</span></code> key set to <code class="docutils literal notranslate"><span class="pre">example_name</span></code>, then the environmental
variable name would need to be <code class="docutils literal notranslate"><span class="pre">SUBSCRIBER_example_name_ENDPOINT</span></code>. Essentially,
for multiple subscribers the <code class="docutils literal notranslate"><span class="pre">Name</span></code> property must be in the environmental
variable name between the <code class="docutils literal notranslate"><span class="pre">SUBSCRIBER_</span></code> and <code class="docutils literal notranslate"><span class="pre">_ENDPOINT</span></code>. The same holds true for
<code class="docutils literal notranslate"><span class="pre">CLIENT_ENDPOINT</span></code> and <code class="docutils literal notranslate"><span class="pre">CLIENT_&lt;Name&gt;_ENDPOINT</span></code> usage of environmental variables too.</p>
<p>In either case, the value of the environmental variable must be set to
<code class="docutils literal notranslate"><span class="pre">$HOST_IP:&lt;PORT&gt;</span></code> where you must fill in what the desired port is. Note that the
IP address is the variable <code class="docutils literal notranslate"><span class="pre">$HOST_IP</span></code>. This will be pulled from the <code class="docutils literal notranslate"><span class="pre">.env</span></code> file
when generating your deployment manifest.</p>
<p>The final implication is on the configuration of the services which the
Azure Bridge is subscribing to. Most EII services publishing over TCP set
their host to <code class="docutils literal notranslate"><span class="pre">127.0.0.1</span></code>. This keeps the communication only available to
subscribers which are on the local host network on the system. In order for
the Azure Bridge to subscribe to these publications this must be changed
to <code class="docutils literal notranslate"><span class="pre">0.0.0.0</span></code>.</p>
<p>This can be accomplished by overridding the service’s publisher <code class="docutils literal notranslate"><span class="pre">EndPoint</span></code>
configuration via environmental variables, just like with the Azure Bridge
service. For each service which the Azure Bridge needs to subscribe to over
TCP, add the environmental variable <code class="docutils literal notranslate"><span class="pre">PUBLISHER_ENDPOINT=0.0.0.0:&lt;PORT&gt;</span></code> to the
environmental variable configuration of the serivce’s module configuration in
your deployment manifest (note: be sure to replace the port).  Or if there are
multiple topics being published, use the variable <code class="docutils literal notranslate"><span class="pre">PUBLISHER_&lt;Name&gt;_ENDPOINT</span></code>.
The same holds true for <code class="docutils literal notranslate"><span class="pre">SERVER_ENDPOINT</span></code> and <code class="docutils literal notranslate"><span class="pre">SERVER_&lt;Name&gt;_ENDPOINT</span></code> usage
of environmental variables too.</p>
<p>These variables have already been set for to have the Azure Bridge subscribe
to a single instance of the Video Analytics service. This configuration can be
seen in your deployment manifest under the, “AzureBridge”, and, “ia_video_analytics”,
modules. Or, you can see this configuration being set in the,
“config/templates/ia_video_analytics.template.json”, and,
“config/templates/AzureBridge.template.json”, files.</p>
<p><strong>ZeroMQ IPC Subscription Implications</strong></p>
<p>If AzureBridge is subscribing to publisher over a ZeroMQ IPC socket, ensure that</p>
<ul>
<li><p>AzureBridge app’s subscriber interfaces configuration matches to that of the
publisher app’s publisher interfaces configuration in <code class="docutils literal notranslate"><span class="pre">build/provision/config/eii_config.json</span></code>
file.  Below is an example of the AzureBridge interface configuration subscribing to the
publications coming from the VideoIngestion container.</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="s2">&quot;Subscribers&quot;</span><span class="o">:</span> <span class="p">[</span>
      <span class="p">{</span>
          <span class="c1">// Specifies that this is the default subscriber</span>
          <span class="s2">&quot;Name&quot;</span><span class="o">:</span> <span class="s2">&quot;default&quot;</span><span class="p">,</span>

          <span class="c1">// Gives the type of connection, i.e. zmq_tcp/zmq_ipc</span>
          <span class="s2">&quot;Type&quot;</span><span class="o">:</span> <span class="s2">&quot;zmq_ipc&quot;</span><span class="p">,</span>

          <span class="c1">// The EndPoint specifies the details of the connect, for an</span>
          <span class="c1">// IPC connection, this would be a JSON object with the</span>
          <span class="c1">// SocketDir key pointing to the directory of the IPC sockets</span>
          <span class="s2">&quot;EndPoint&quot;</span><span class="o">:</span> <span class="s2">&quot;/EII/sockets&quot;</span><span class="p">,</span>

          <span class="c1">// Specification of the AppName of the service publishing the</span>
          <span class="c1">// messages. This allows the Azure Bridge to get the needed</span>
          <span class="c1">// authentication keys to subscriber</span>
          <span class="s2">&quot;PublisherAppName&quot;</span><span class="o">:</span> <span class="s2">&quot;VideoIngestion&quot;</span><span class="p">,</span>

          <span class="c1">// Specifies the list of all of the topics which the</span>
          <span class="c1">// AzureBridge shall subscribe to</span>
          <span class="s2">&quot;Topics&quot;</span><span class="o">:</span> <span class="p">[</span>
              <span class="s2">&quot;camera1_stream&quot;</span>
          <span class="p">]</span>
      <span class="p">}</span>
   <span class="p">]</span>
  <span class="p">}</span>
</pre></div>
</div>
</li>
<li><p>Please follow <code class="docutils literal notranslate"><span class="pre">Step</span> <span class="pre">3</span> <span class="pre">-</span> <span class="pre">Configuring</span> <span class="pre">Azure</span> <span class="pre">IoT</span> <span class="pre">Deployment</span> <span class="pre">Manifest</span></code> above to generate the manifest
template file and deployment manifest files. Ensure to remove all the <code class="docutils literal notranslate"><span class="pre">PUBLISHER_ENDPOINT</span></code>,
<code class="docutils literal notranslate"><span class="pre">PUBLISHER_&lt;Name&gt;_ENDPOINT</span></code>, <code class="docutils literal notranslate"><span class="pre">SUBSCRIBER_ENDPOINT</span></code> and <code class="docutils literal notranslate"><span class="pre">SUBSCRIBER_&lt;Name&gt;_ENDPOINT</span></code> environmental
variables from the generated deployment manifest template file i.e., <a class="reference external" href="https://github.com/open-edge-insights/eii-azure-bridge/blob/master/example.template.json">example.template.json</a>
as these ENVs are not applicable for IPC configuration. Additionally, update the
<a class="reference external" href="https://github.com/open-edge-insights/eii-azure-bridge/blob/master/example.template.json">example.template.json</a> as per the recommendations mentioned in the
<code class="docutils literal notranslate"><span class="pre">Important</span> <span class="pre">Note</span></code> section for IPC configuration. Please re-generate the deployment manifest file (<code class="docutils literal notranslate"><span class="pre">config/example.amd64.json</span></code>)
by running the below command:</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>$ iotedgedev genconfig -f example.template.json
</pre></div>
</div>
</li>
<li><p>Please follow <code class="docutils literal notranslate"><span class="pre">Step</span> <span class="pre">4</span> <span class="pre">-</span> <span class="pre">Deployment</span></code> above for deployment</p></li>
</ul>
<p>Below is an example digital twin for the Azure Bridge:</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="nt">&quot;log_level&quot;</span><span class="p">:</span> <span class="s2">&quot;DEBUG&quot;</span><span class="p">,</span>
    <span class="nt">&quot;topics&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;camera1_stream_results&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="nt">&quot;az_output_topic&quot;</span><span class="p">:</span> <span class="s2">&quot;camera1_stream_results&quot;</span>
        <span class="p">}</span>
    <span class="p">},</span>
    <span class="nt">&quot;eii_config&quot;</span><span class="p">:</span> <span class="s2">&quot;{\&quot;/AzureBridge/config\&quot;: {}, \&quot;/AzureBridge/interfaces\&quot;: {\&quot;Subscribers\&quot;: [{\&quot;EndPoint\&quot;: \&quot;127.0.0.1:65013\&quot;, \&quot;Name\&quot;: \&quot;default\&quot;, \&quot;PublisherAppName\&quot;: \&quot;VideoAnalytics\&quot;, \&quot;Topics\&quot;: [\&quot;camera1_stream_results\&quot;], \&quot;Type\&quot;: \&quot;zmq_tcp\&quot;}]}, \&quot;/EtcdUI/config\&quot;: {}, \&quot;/EtcdUI/interfaces\&quot;: {}, \&quot;/GlobalEnv/\&quot;: {\&quot;C_LOG_LEVEL\&quot;: \&quot;DEBUG\&quot;, \&quot;ETCD_KEEPER_PORT\&quot;: \&quot;7070\&quot;, \&quot;GO_LOG_LEVEL\&quot;: \&quot;INFO\&quot;, \&quot;GO_VERBOSE\&quot;: \&quot;0\&quot;, \&quot;PY_LOG_LEVEL\&quot;: \&quot;DEBUG\&quot;}, \&quot;/VideoAnalytics/config\&quot;: {\&quot;encoding\&quot;: {\&quot;level\&quot;: 95, \&quot;type\&quot;: \&quot;jpeg\&quot;}, \&quot;max_jobs\&quot;: 20, \&quot;max_workers\&quot;: 4, \&quot;queue_size\&quot;: 10, \&quot;udfs\&quot;: [{\&quot;device\&quot;: \&quot;CPU\&quot;, \&quot;model_bin\&quot;: \&quot;common/udfs/python/pcb/ref/model_2.bin\&quot;, \&quot;model_xml\&quot;: \&quot;common/udfs/python/pcb/ref/model_2.xml\&quot;, \&quot;name\&quot;: \&quot;pcb.pcb_classifier\&quot;, \&quot;ref_config_roi\&quot;: \&quot;common/udfs/python/pcb/ref/roi_2.json\&quot;, \&quot;ref_img\&quot;: \&quot;common/udfs/python/pcb/ref/ref.png\&quot;, \&quot;type\&quot;: \&quot;python\&quot;}]}, \&quot;/VideoAnalytics/interfaces\&quot;: {\&quot;Publishers\&quot;: [{\&quot;AllowedClients\&quot;: [\&quot;*\&quot;], \&quot;EndPoint\&quot;: \&quot;0.0.0.0:65013\&quot;, \&quot;Name\&quot;: \&quot;default\&quot;, \&quot;Topics\&quot;: [\&quot;camera1_stream_results\&quot;], \&quot;Type\&quot;: \&quot;zmq_tcp\&quot;}], \&quot;Subscribers\&quot;: [{\&quot;EndPoint\&quot;: \&quot;/EII/sockets\&quot;, \&quot;Name\&quot;: \&quot;default\&quot;, \&quot;PublisherAppName\&quot;: \&quot;VideoIngestion\&quot;, \&quot;Topics\&quot;: [\&quot;camera1_stream\&quot;], \&quot;Type\&quot;: \&quot;zmq_ipc\&quot;, \&quot;zmq_recv_hwm\&quot;: 50}]}, \&quot;/VideoIngestion/config\&quot;: {\&quot;encoding\&quot;: {\&quot;level\&quot;: 95, \&quot;type\&quot;: \&quot;jpeg\&quot;}, \&quot;ingestor\&quot;: {\&quot;loop_video\&quot;: true, \&quot;pipeline\&quot;: \&quot;./test_videos/pcb_d2000.avi\&quot;, \&quot;poll_interval\&quot;: 0.2, \&quot;queue_size\&quot;: 10, \&quot;type\&quot;: \&quot;opencv\&quot;}, \&quot;max_jobs\&quot;: 20, \&quot;max_workers\&quot;: 4, \&quot;sw_trigger\&quot;: {\&quot;init_state\&quot;: \&quot;running\&quot;}, \&quot;udfs\&quot;: [{\&quot;n_left_px\&quot;: 1000, \&quot;n_right_px\&quot;: 1000, \&quot;n_total_px\&quot;: 300000, \&quot;name\&quot;: \&quot;pcb.pcb_filter\&quot;, \&quot;scale_ratio\&quot;: 4, \&quot;training_mode\&quot;: \&quot;false\&quot;, \&quot;type\&quot;: \&quot;python\&quot;}]}, \&quot;/VideoIngestion/interfaces\&quot;: {\&quot;Publishers\&quot;: [{\&quot;AllowedClients\&quot;: [\&quot;VideoAnalytics\&quot;, \&quot;Visualizer\&quot;, \&quot;WebVisualizer\&quot;, \&quot;TLSRemoteAgent\&quot;, \&quot;RestDataExport\&quot;], \&quot;EndPoint\&quot;: \&quot;/EII/sockets\&quot;, \&quot;Name\&quot;: \&quot;default\&quot;, \&quot;Topics\&quot;: [\&quot;camera1_stream\&quot;], \&quot;Type\&quot;: \&quot;zmq_ipc\&quot;}], \&quot;Servers\&quot;: [{\&quot;AllowedClients\&quot;: [\&quot;*\&quot;], \&quot;EndPoint\&quot;: \&quot;127.0.0.1:66013\&quot;, \&quot;Name\&quot;: \&quot;default\&quot;, \&quot;Type\&quot;: \&quot;zmq_tcp\&quot;}]}}&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
<blockquote>
<div><p>See the <code class="docutils literal notranslate"><span class="pre">modules/AzureBridge/config_schema.json</span></code> for the full JSON schema
for the digital twin of the Azure Bridge module.</p>
</div></blockquote>
<p>Each key in the configuration above is described in the table below.</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 50%" />
<col style="width: 50%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Key</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">log_level</span></code></p></td>
<td><p>This is the logging level for the Azure Bridge module, must be INFO, DEBUG, WARN, or ERROR</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">topics</span></code></p></td>
<td><p>Configuration for the topics to map from the EII Message Bus into the Azure IoT Edge Runtime</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">eii_config</span></code></p></td>
<td><p>Entire serialized configuration for EII; this configuration will be placed in ETCD</p></td>
</tr>
</tbody>
</table>
<p>You will notice that the <code class="docutils literal notranslate"><span class="pre">eii_config</span></code> is a serialized JSON string. This is due
to a limitation with the Azure IoT Edge Runtime. Currently, module digital twins
do not support arrays; however, the EII configuration requires array support. To
workaround this limitation, the EII configuration must be a serialized JSON
string in the digital twin for the Azure Bridge module.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">topics</span></code> value is a JSON object, where each key is a topic from the EII Message
Bus which will be re-published onto the Azure IoT Edge Runtime. The value for
the topic key will be an additional JSON object, where there is one required
key, <code class="docutils literal notranslate"><span class="pre">az_output_topic</span></code>, which is the topic on Azure IoT Edge Runtime to use and
then an optional key, <code class="docutils literal notranslate"><span class="pre">az_blob_container_name</span></code>. This key specifies the Azure Blob
Storage container to store the images from the EII video analytics pipeline in.
If the <code class="docutils literal notranslate"><span class="pre">az_blob_container_name</span></code> key is not specified, then the images will
not be saved.</p>
<blockquote>
<div><p><strong>IMPORTANT NOTE:</strong> “Container” in the Azure Blob Storage context is not
referencing a Docker container, but rather a storage structure within the
Azure Blob Storage instance running on your edge device. For more information
on the data structure of Azure Blob Storage, see
<a class="reference external" href="https://docs.microsoft.com/en-us/azure/storage/blobs/storage-blobs-introduction#blob-storage-resources">this link</a>.</p>
</div></blockquote>
<p><strong>IMPORTANT NOTE</strong></p>
<p>The Azure Blob Storage service places strict requirements on the name of the,
“container”, under which it stores blobs. This impacts the value given for the
<code class="docutils literal notranslate"><span class="pre">az_blob_container_name</span></code> configuration key. According to the Azure documentation,
the name must a valid DNS name adhering to the following rules:</p>
<ul class="simple">
<li><dl class="simple">
<dt>Container names must start or end with a letter or number, and can contain</dt><dd><p>only letters, numbers, and the dash (-) character.</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>Every dash (-) character must be immediately preceded and followed by a</dt><dd><p>letter or number; consecutive dashes are not permitted in container names.</p>
</dd>
</dl>
</li>
<li><p>All letters in a container name must be lowercase.</p></li>
<li><p>Container names must be from 3 through 63 characters long.</p></li>
</ul>
<p>For more information on the name conventions/restrictions for Azure Blob Storage
container names, see <a class="reference external" href="https://docs.microsoft.com/en-us/rest/api/storageservices/Naming-and-Referencing-Containers--Blobs--and-Metadata">this</a>
page of the Azure documentation.</p>
</section>
<section id="sample-eii-onnx-udf">
<h2>Sample EII ONNX UDF<a class="headerlink" href="#sample-eii-onnx-udf" title="Permalink to this headline">¶</a></h2>
<p>EII provides a sample UDF which utilizes the ONNX RT to execute your machine learning /
deep learning model. It also supports connecting to an AzureML Workspace to download
the model and then run it. The source code for this UDF is in
<code class="docutils literal notranslate"><span class="pre">[WORKDIR]/IEdgeInsights/common/video/udfs/python/sample_onnx/</span></code>, please also refer
<code class="docutils literal notranslate"><span class="pre">Sample</span> <span class="pre">ONNX</span> <span class="pre">UDF</span></code> section in <code class="docutils literal notranslate"><span class="pre">[WORKDIR]/IEdgeInsights/common/video/udfs/README.md</span></code> for doing
the required configuration for running this UDF.</p>
<p>To use this UDF with EII, you need to modify your <code class="docutils literal notranslate"><span class="pre">build/provision/config/eii_config.json</span></code>
configuration file to run the UDF in either your Video Ingesiton or Video Analytics
instance. Please ensure to remove the existing PCB filter/classifier UDFs or any other UDFs
in Video Ingestion and Video Analytics config keys in <code class="docutils literal notranslate"><span class="pre">build/provision/config/eii_config.json</span></code> as
we are doing some basic pre-processing, inferencing and post-processing in the ONNX UDF itself.
Then, you need to modify the environmental variables in the <code class="docutils literal notranslate"><span class="pre">AzureBridge/.env</span></code> file to provide the connection
information to enable the UDF to download your model from AzureML. Make sure to follow the
instructions provided in the <a class="reference external" href="#setting-up-azureml">Setting up AzureML</a> section above to configure your
workspace correctly so that the UDF can download your model.</p>
<p>The sample ONNX UDF requires that the following configuration values be set for
the UDF in your <code class="docutils literal notranslate"><span class="pre">eii_config.json</span></code> file:</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 50%" />
<col style="width: 50%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Key</p></th>
<th class="head"><p>Value</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">aml_ws</span></code></p></td>
<td><p>AzureML workspace name</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">aml_subscription_id</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">subscriptionId</span></code> saved from creating the Service Principal Authentication</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">model_name</span></code></p></td>
<td><p>Name of the model in your AzureML workspace</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">download_mode</span></code></p></td>
<td><p>Whether or not to attempt to download the model</p></td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If <code class="docutils literal notranslate"><span class="pre">download_mode</span></code> is <code class="docutils literal notranslate"><span class="pre">false</span></code>, then it expects the <code class="docutils literal notranslate"><span class="pre">model_name</span></code> to
where the <code class="docutils literal notranslate"><span class="pre">*.onnx</span></code> model file is in the container.</p>
</div>
<p>This should be added into the <code class="docutils literal notranslate"><span class="pre">udfs</span></code> list for your Video Ingestion or Video Analytics
instance you wish to have run the UDF. The configuration should look similar to
the following:</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="c1">// ... omited rest of EII configuration ...</span>

    <span class="s2">&quot;udfs&quot;</span><span class="o">:</span> <span class="p">[</span>
        <span class="p">{</span>
            <span class="s2">&quot;name&quot;</span><span class="o">:</span> <span class="s2">&quot;sample_onnx.onnx_udf&quot;</span><span class="p">,</span>
            <span class="s2">&quot;type&quot;</span><span class="o">:</span> <span class="s2">&quot;python&quot;</span><span class="p">,</span>
            <span class="s2">&quot;aml_ws&quot;</span><span class="o">:</span> <span class="s2">&quot;example-azureml-workspace&quot;</span><span class="p">,</span>
            <span class="s2">&quot;aml_subscription_id&quot;</span><span class="o">:</span> <span class="s2">&quot;subscription-id&quot;</span><span class="p">,</span>
            <span class="s2">&quot;model_name&quot;</span><span class="o">:</span> <span class="s2">&quot;example-model-name&quot;</span><span class="p">,</span>
            <span class="s2">&quot;download_model&quot;</span><span class="o">:</span> <span class="kc">true</span>
        <span class="p">}</span>
    <span class="p">]</span>

    <span class="c1">// ... omited rest of EII configuration ...</span>
<span class="p">}</span>
</pre></div>
</div>
<p>The following environmental variables must be set in the <code class="docutils literal notranslate"><span class="pre">AzureBridge/.env</span></code> file
in order to have the sample ONNX UDF download your model from an AzureML Workspace:</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 50%" />
<col style="width: 50%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Setting</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">AML_TENANT_ID</span></code></p></td>
<td><p>The <code class="docutils literal notranslate"><span class="pre">tenantId</span></code> saved in the Azure Cloud setup</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">AML_PRINCIPAL_ID</span></code></p></td>
<td><p>The <code class="docutils literal notranslate"><span class="pre">clientId</span></code> saved in the Azure Cloud setup</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">AML_PRINCIPAL_PASS</span></code></p></td>
<td><p>The <code class="docutils literal notranslate"><span class="pre">clientSecret</span></code> saved in the Azure Cloud setup</p></td>
</tr>
</tbody>
</table>
<p>It is important to note that for the <code class="docutils literal notranslate"><span class="pre">AML_PRINCIPAL_PASS</span></code> variable you must wrap the password
in single quotes, i.e. <code class="docutils literal notranslate"><span class="pre">'</span></code>. Otherwise, there may be characters that get escaped in
a weird way when the values are populated into your deployment manifest leading
to configuration errors.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">tenantId</span></code>, <code class="docutils literal notranslate"><span class="pre">clientId</span></code>, <code class="docutils literal notranslate"><span class="pre">clientSecret</span></code>, and <code class="docutils literal notranslate"><span class="pre">subscriptionId</span></code> should all have
been obtained when following the instructions in the <a class="reference external" href="#setting-up-azureml">Setting up AzureML</a>
section.</p>
<p>Please run the below steps when the <code class="docutils literal notranslate"><span class="pre">sample_onnx</span></code> UDF is failing with error like
<code class="docutils literal notranslate"><span class="pre">The</span> <span class="pre">provided</span> <span class="pre">client</span> <span class="pre">secret</span> <span class="pre">keys</span> <span class="pre">are</span> <span class="pre">expired.</span> <span class="pre">Visit</span> <span class="pre">the</span> <span class="pre">Azure</span> <span class="pre">Portal</span> <span class="pre">to</span> <span class="pre">create</span> <span class="pre">new</span> <span class="pre">keys</span> <span class="pre">for</span> <span class="pre">your</span> <span class="pre">app</span></code>:</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>$ az login
$ az ad sp create-for-rbac --sdk-auth --name ml-auth
</pre></div>
</div>
<p>The output of above command will be in json format. Please update the <code class="docutils literal notranslate"><span class="pre">AML_</span></code> env variables in <code class="docutils literal notranslate"><span class="pre">AzureBridge/.env</span></code>
as per above table and follow the steps <a class="reference external" href="#step-3-configuring-azure-iot-deployment-manifest">Step 3</a> and
<a class="reference external" href="#step-4-deployment">Step 4</a> to see the <code class="docutils literal notranslate"><span class="pre">sample_onnx</span></code> UDF working fine.</p>
<p><strong>IMPORTANT NOTE:</strong></p>
<p>If your system is behind a proxy, you may run into an issue where the download of
your ONNX model from AzureML times out. This may happen even if the proxy is set
globally for Docker on your system. To fix this, update your deployment manifest
template so that the Video Ingestion and/or Video Analytics containers have
the <code class="docutils literal notranslate"><span class="pre">http_proxy</span></code> and <code class="docutils literal notranslate"><span class="pre">https_proxy</span></code> values set. The manifest should look something
like the following:</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="c1">// ... omitted ...</span>

    <span class="s2">&quot;modules&quot;</span><span class="o">:</span> <span class="p">{</span>
        <span class="s2">&quot;ia_video_ingestion&quot;</span><span class="o">:</span> <span class="p">{</span>
            <span class="c1">// ... omitted ...</span>

            <span class="s2">&quot;settings&quot;</span><span class="o">:</span> <span class="p">{</span>
                <span class="s2">&quot;createOptions&quot;</span><span class="o">:</span> <span class="p">{</span>
                    <span class="s2">&quot;Env&quot;</span><span class="o">:</span> <span class="p">[</span>
                        <span class="c1">// ... omitted ...</span>

                        <span class="s2">&quot;http_proxy=&lt;YOUR PROXY&gt;&quot;</span><span class="p">,</span>
                        <span class="s2">&quot;https_proxy=&lt;YOUR PROXY&gt;&quot;</span><span class="p">,</span>

                        <span class="c1">// ... omitted ...</span>
                    <span class="p">]</span>
                <span class="p">}</span>
            <span class="p">}</span>

            <span class="c1">// ... omitted ...</span>
        <span class="p">}</span>
    <span class="p">}</span>

    <span class="c1">// ... omitted ...</span>
<span class="p">}</span>
</pre></div>
</div>
</section>
<section id="simple-subscriber">
<h2>Simple Subscriber<a class="headerlink" href="#simple-subscriber" title="Permalink to this headline">¶</a></h2>
<p>The Simple Subscriber module provided with the Azure Bridge is a very simple
service which only receives messages over the Azure IoT Edge Runtime and prints
them to stdout. As such, there is no digital twin required for this module. The
only configuration required is that a route be established in the Azure IoT Edge
Runtime from the Azure Bridge module to the Simple Subscriber module. This
routewill look something like the following in your deployment manifest:</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;$schema-template&quot;</span><span class="o">:</span> <span class="s2">&quot;2.0.0&quot;</span><span class="p">,</span>
    <span class="s2">&quot;modulesContent&quot;</span><span class="o">:</span> <span class="p">{</span>
        <span class="c1">// ... omitted for brevity ...</span>

        <span class="s2">&quot;$edgeHub&quot;</span><span class="o">:</span> <span class="p">{</span>
            <span class="s2">&quot;properties.desired&quot;</span><span class="o">:</span> <span class="p">{</span>
                <span class="s2">&quot;schemaVersion&quot;</span><span class="o">:</span> <span class="s2">&quot;1.0&quot;</span><span class="p">,</span>
                <span class="s2">&quot;routes&quot;</span><span class="o">:</span> <span class="p">{</span>
                    <span class="s2">&quot;BridgeToSimpleSubscriber&quot;</span><span class="o">:</span> <span class="s2">&quot;FROM /messages/modules/AzureBridge/outputs/camera1_stream INTO BrokeredEndpoint(\&quot;/modules/SimpleSubscriber/inputs/input1\&quot;)&quot;</span>
                <span class="p">},</span>
                <span class="s2">&quot;storeAndForwardConfiguration&quot;</span><span class="o">:</span> <span class="p">{</span>
                    <span class="s2">&quot;timeToLiveSecs&quot;</span><span class="o">:</span> <span class="mf">7200</span>
                <span class="p">}</span>
            <span class="p">}</span>
        <span class="p">}</span>

        <span class="c1">// ... omitted for brevity ...</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>For more information on establishing routes in the Azure IoT Edge Runtime,
see <a class="reference external" href="https://docs.microsoft.com/en-us/azure/iot-edge/module-composition#declare-routes">this documentation</a>.</p>
</section>
<section id="eii-etcd-pre-load">
<h2>EII ETCD Pre-Load<a class="headerlink" href="#eii-etcd-pre-load" title="Permalink to this headline">¶</a></h2>
<p>The configuration for EII is given to the Azure Bridge via the <code class="docutils literal notranslate"><span class="pre">eii_config</span></code>
key in the module’s digital twin. As specified in the Azure Bridge configuration
section, this must be a serialized string. For the scripts included with the
Azure Bridge for generating your deployment manifest the ETCD pre-load
configuration is stored at <code class="docutils literal notranslate"><span class="pre">config/eii_config.json</span></code>. See the EII documentation
for more information on populating this file with your desired EII configuration.
The helper scripts will automatically serialize this JSON file and add it to your
deployment manifest.</p>
</section>
<section id="azure-blob-storage">
<h2>Azure Blob Storage<a class="headerlink" href="#azure-blob-storage" title="Permalink to this headline">¶</a></h2>
<p>The Azure Bridge enables to use of the Azure Blob Storage edge IoT service
from Microsoft. This service can be used to save images from EII into the blob
storage.</p>
<p>If you wish to have the Azure Blob Storage service save the images to your
host filesystem, then you must do the following:</p>
<ol class="arabic">
<li><dl class="simple">
<dt>Create the directory to save the data on your host filesystem, it is recommended</dt><dd><p>to use the following commands:</p>
</dd>
</dl>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>$ sudo mkdir /opt/intel/eii/data/azure-blob-storage
$ sudo chown eiiuser:eiiuser /opt/intel/eii/data/azure-blob-storage
</pre></div>
</div>
</li>
<li><dl class="simple">
<dt>Next, modify your deployment manifest to alter the bind location which the</dt><dd><p>Azure Blob Storage service uses. To do this, open your <code class="docutils literal notranslate"><span class="pre">*.template.json</span></code> file.
Provided you specified the Azure Blob Storage service, you should see something
like the following in your deployment manifest template:</p>
</dd>
</dl>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span>   {
       &quot;AzureBlobStorageonIoTEdge&quot;: {
           &quot;type&quot;: &quot;docker&quot;,
           &quot;status&quot;: &quot;running&quot;,
           &quot;restartPolicy&quot;: &quot;always&quot;,
           &quot;version&quot;: &quot;1.0&quot;,
           &quot;settings&quot;: {
               &quot;image&quot;: &quot;mcr.microsoft.com/azure-blob-storage&quot;,
               &quot;createOptions&quot;: {
                   &quot;User&quot;: &quot;${EII_UID}&quot;,
                   &quot;Env&quot;: [
                       &quot;LOCAL_STORAGE_ACCOUNT_NAME=$AZ_BLOB_STORAGE_ACCOUNT_NAME&quot;,
                       &quot;LOCAL_STORAGE_ACCOUNT_KEY=$AZ_BLOB_STORAGE_ACCOUNT_KEY&quot;
                   ],
                   &quot;HostConfig&quot;: {
                       &quot;Binds&quot;: [
                           &quot;az-blob-storage-volume:/blobroot&quot;
                       ]
                   }
               }
           }
       }
   }

Change the ``Binds`` location to the following:
</pre></div>
</div>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span>   <span class="p">{</span>
       <span class="s2">&quot;AzureBlobStorageonIoTEdge&quot;</span><span class="o">:</span> <span class="p">{</span>
           <span class="c1">// ... omitted ...</span>
           <span class="s2">&quot;settings&quot;</span><span class="o">:</span> <span class="p">{</span>
               <span class="s2">&quot;createOptions&quot;</span><span class="o">:</span> <span class="p">{</span>
                   <span class="c1">// ... omitted ...</span>
                   <span class="s2">&quot;HostConfig&quot;</span><span class="o">:</span> <span class="p">{</span>
                       <span class="s2">&quot;Binds&quot;</span><span class="o">:</span> <span class="p">[</span>
                           <span class="s2">&quot;/opt/intel/eii/data/azure-blob-storage/:/blobroot&quot;</span>
                       <span class="p">]</span>
                   <span class="p">}</span>
               <span class="p">}</span>
           <span class="p">}</span>
       <span class="p">}</span>
   <span class="p">}</span>

<span class="nx">Make</span> <span class="nx">sure</span> <span class="nx">to</span> <span class="nx">run</span> <span class="nx">the</span> <span class="sb">``</span><span class="nx">iotedgedev</span> <span class="nx">geoncfig</span> <span class="o">-</span><span class="nx">f</span> <span class="o">&lt;</span><span class="nx">manifest</span><span class="o">-</span><span class="nx">template</span><span class="o">&gt;</span><span class="sb">``</span> <span class="nx">command</span>
<span class="k">for</span> <span class="nx">the</span> <span class="nx">changes</span> <span class="nx">to</span> <span class="nx">be</span> <span class="nx">applied</span> <span class="nx">to</span> <span class="nx">the</span> <span class="nx">actual</span> <span class="nx">deployment</span> <span class="nx">manifest</span><span class="p">.</span>

<span class="nx">When</span> <span class="nx">you</span> <span class="nx">run</span> <span class="nx">the</span> <span class="nx">Azure</span> <span class="nx">Bridge</span> <span class="nx">where</span> <span class="nx">it</span> <span class="nx">is</span> <span class="nx">configured</span> <span class="nx">to</span> <span class="nx">save</span> <span class="nx">the</span> <span class="nx">images</span> <span class="nx">into</span>
<span class="nx">an</span> <span class="nx">Azure</span> <span class="nx">Blob</span> <span class="nx">Storage</span> <span class="nx">instance</span><span class="p">,</span> <span class="nx">you</span> <span class="nx">should</span> <span class="nx">see</span> <span class="nx">the</span> <span class="nx">images</span> <span class="nx">by</span> <span class="nx">running</span> <span class="nx">the</span>
<span class="nx">following</span> <span class="nx">command</span><span class="o">:</span>
</pre></div>
</div>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>   $ sudo ls -l /opt/intel/eii/data/azure-blob-storage/BlockBlob/

In that directory, you will see a folder <span class="k">for</span> each container. Inside that directory
will be the individually saved images.
</pre></div>
</div>
</li>
</ol>
<p>For more information on configuring your Azure Blob Storage instance at the
edge, see the documentation for the service <a class="reference external" href="https://docs.microsoft.com/en-us/azure/iot-edge/how-to-store-data-blob">here</a>.</p>
<p>Also see <a class="reference external" href="https://docs.microsoft.com/en-us/azure/iot-edge/how-to-deploy-blob">this guide</a>
as well.</p>
</section>
<section id="azure-deployment-manifest">
<h2>Azure Deployment Manifest<a class="headerlink" href="#azure-deployment-manifest" title="Permalink to this headline">¶</a></h2>
<p>For more information on creating / modifying Azure IoT Hub deployment manifests,
see <a class="reference external" href="https://docs.microsoft.com/en-us/azure/iot-edge/module-composition">this guide</a>.</p>
</section>
</section>


           </div>
          </div>
          <footer>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright (c) 2021 Intel Corporation.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  
  <div class="rst-versions" data-toggle="rst-versions" role="note" aria-label="versions">
    <span class="rst-current-version" data-toggle="rst-current-version">
      <span class="fa fa-book"> OEI</span>
      v: 3.0
      <span class="fa fa-caret-down"></span>
    </span>
    <div class="rst-other-versions">
      <dl>
        <dt>Document Versions</dt>
        
          <dd><a href="/3.0/">3.0</a></dd>
        
          <dd><a href="/2.6/">2.6</a></dd>
        
      </dl>
    </div>
  </div><script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>